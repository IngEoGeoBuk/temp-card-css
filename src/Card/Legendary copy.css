/*
  RADIANT HOLOFOIL (LEGENDARY)
*/

/* ============================================
   SHINE LAYER (Legendary용)
   ============================================ */
.tilt-shine-legendary {
  position: absolute;
  inset: 0;
  z-index: 2;
  transform: translateZ(1px);
  overflow: hidden;
  pointer-events: none;
  will-change: background-image, background-position, opacity;
  backface-visibility: hidden;
  opacity: 0;
  transition: opacity 0.2s ease;
}

/* ============================================
     LEGENDARY (Radiant Holofoil)
     ============================================ */
.tilt-card--legendary {
  --barwidth: 1.2%;
  --space: 200px;
  --hue: 50;
  --imgsize: cover;
  --glitter: url("/images/card/legendary/glitter.png");
  --foil: url("/images/card/legendary/trainerbg.png");
}

/* 메인 교차 패턴 (X 무늬) */
.tilt-card--legendary.is-active .tilt-shine-legendary {
  opacity: 1;
  background-image:
    radial-gradient(farthest-corner ellipse at calc(((var(--pointer-x)) * 0.5) + 25%) calc(((var(--pointer-y)) * 0.5) + 25%),
      hsl(0, 0%, 95%) 20%,
      var(--card-glow) 130%),

    repeating-linear-gradient(45deg,
      hsl(0, 0%, 10%) 0%,
      hsl(0, 0%, 10%) var(--barwidth),
      hsl(0, 0%, 20%) calc(var(--barwidth) * 2),
      hsl(0, 0%, 35%) calc(var(--barwidth) * 3),
      hsl(0, 0%, 50%) calc(var(--barwidth) * 4),
      hsl(0, 0%, 35%) calc(var(--barwidth) * 5),
      hsl(0, 0%, 20%) calc(var(--barwidth) * 6),
      hsl(0, 0%, 10%) calc(var(--barwidth) * 7),
      hsl(0, 0%, 0%) calc(var(--barwidth) * 8)),

    repeating-linear-gradient(-45deg,
      hsl(0, 0%, 10%) 0%,
      hsl(0, 0%, 10%) var(--barwidth),
      hsl(0, 0%, 20%) calc(var(--barwidth) * 2),
      hsl(0, 0%, 35%) calc(var(--barwidth) * 3),
      hsl(0, 0%, 50%) calc(var(--barwidth) * 4),
      hsl(0, 0%, 35%) calc(var(--barwidth) * 5),
      hsl(0, 0%, 20%) calc(var(--barwidth) * 6),
      hsl(0, 0%, 10%) calc(var(--barwidth) * 7),
      hsl(0, 0%, 0%) calc(var(--barwidth) * 8));

  background-size: cover, 210% 210%, 210% 210%;
  background-position:
    center,
    calc(((var(--background-x) - 50%) * 1.5) + 50%) calc(((var(--background-y) - 50%) * 1.5) + 50%),
    calc(((var(--background-x) - 50%) * 1.5) + 50%) calc(((var(--background-y) - 50%) * 1.5) + 50%);

  background-blend-mode: exclusion, darken, color-dodge;

  /* contrast 낮춤 (핵심) */
  filter: brightness(0.6) contrast(1.8) saturate(1.6);
  mix-blend-mode: color-dodge;
}

/* ============================================
     ::after — 무지개 컬러 레이어 (색 담당)
     ============================================ */
.tilt-card--legendary.is-active .tilt-shine-legendary::after {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 1;

  background-image:
    repeating-linear-gradient(55deg,
      hsl(3, 95%, 85%) calc(var(--space) * 1),
      hsl(207, 100%, 84%) calc(var(--space) * 2),
      hsl(29, 100%, 85%) calc(var(--space) * 3),
      hsl(160, 100%, 86%) calc(var(--space) * 4),
      hsl(309, 94%, 87%) calc(var(--space) * 5),
      hsl(188, 95%, 85%) calc(var(--space) * 6),
      hsl(3, 95%, 85%) calc(var(--space) * 7));

  background-size: 400% 100%;
  background-position:
    calc(((var(--background-x) - 50%) * -2.5) + 50%) calc(((var(--background-y) - 50%) * -2.5) + 50%);

  mix-blend-mode: soft-light;
  /* overlay → soft-light */
  opacity: 0.85;
}

/* ============================================
     ::before — FOIL + GLITTER (텍스처 담당)
     ============================================ */
.tilt-card--legendary.is-active .tilt-shine-legendary::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 2;

  background-image:
    var(--foil),
    var(--glitter),
    radial-gradient(farthest-corner ellipse at calc(((var(--pointer-x)) * 0.5) + 25%) calc(((var(--pointer-y)) * 0.5) + 25%),
      hsla(0, 0%, 58%, 0.6) 10%,
      hsla(0, 0%, 20%, 0.8) 20%,
      hsla(0, 0%, 20%, 0.4) 50%);

  background-size:
    var(--imgsize),
    15% 15%,
    350% 350%;

  background-position: center;

  background-blend-mode: multiply, color-dodge, normal;
  mix-blend-mode: soft-light;

  filter: brightness(0.8) contrast(1.2) saturate(0.8);
}

/* ============================================
     GLARE
     ============================================ */
.tilt-card--legendary.is-active .tilt-glare {
  background-image:
    radial-gradient(farthest-corner circle at var(--pointer-x) var(--pointer-y),
      hsla(0, 0%, 100%, 0.33) 0%,
      hsl(0, 0%, 25%) 110%);

  filter: brightness(1) contrast(1.3);
  mix-blend-mode: hard-light;
  opacity: calc(var(--card-opacity) * 0.8);
}